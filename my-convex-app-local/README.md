# ๐ฌ Quote Sender - Convex Backend

ูุดุฑูุน ูุชูุงูู ูุฅุฑุณุงู ุงูุงูุชุจุงุณุงุช ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจุงุณุชุฎุฏุงู **Convex** ูุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ู**Resend** ูุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจุทุฑููุฉ ุฅุจุฏุงุนูุฉ ููุฑูุฏุฉ.

## ๐ง ููุฑุฉ ุงููุดุฑูุน

### ๐ **ุงูุณููุงุฑูู ุงููุงูู:**

#### **ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู ูุฃูู ูุฑุฉ:**
1. ูุณุฌู ุฏุฎููู
2. ููุทูุจ ููู ุงุฎุชูุงุฑ ุดุฎุตูุชู ุงูููุถูุฉ
3. ูููุนูู ูุธุงู ุงูุฅุฑุณุงู ุงูุชููุงุฆู

#### **ุจุนุฏูุง:**
- โฐ **ูู ููู ุฃู ูู ููููู** (ูุญุฏุฏู ูุงุญููุง)ุ ูุชู ุฅุฑุณุงู ุงูุชุจุงุณ ุนุดูุงุฆู ูู ุงูุดุฎุตูุฉ ุงูููุถูุฉ ุฅูู ุจุฑูุฏู ุงูุฅููุชุฑููู.

#### **ุฅุฐุง ุฏุฎู ูุงุญููุง ููุชุทุจูู ูุงุฎุชุงุฑ:**
- ููุฏู ุงูุญุงูู (ูุซูุงู: ุญุฒููุ ุณุนูุฏโฆ)
- ูุดุฎุตูุฉ ุชุฑุฏ ุนููู ูู ูุฐุง ุงููุฒุงุฌ
- ๐ฉ **ูุชู ุฅุฑุณุงู ุฅูููู ููุฑู** ูู ูุฐู ุงูุดุฎุตูุฉ ุจูุงุกู ุนูู ุงูููุฏ.

โ๏ธ **ููู:** ุฅุฑุณุงู ุงูุงูุชุจุงุณุงุช ุงูููููุฉ ูู ุงูุดุฎุตูุฉ ุงูููุถูุฉ ูุจูู ูุณุชูุฑูุง ููุง ูุชููู.

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

- **Convex** - ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงููุธุงุฆู ุงูุฎูููุฉ
- **Resend** - ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุจุทุฑููุฉ ุฅุจุฏุงุนูุฉ
- **TypeScript** - ูุบุฉ ุงูุจุฑูุฌุฉ
- **bcryptjs** - ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- **Cron Jobs** - ุงูุฅุฑุณุงู ุงูุชููุงุฆู

## ๐ ูููู ุงููุดุฑูุน

```
convex/
โโโ schema.ts              # ุชุนุฑูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โโโ users.ts               # ูุงููุดูุฒ ุงููุณุชุฎุฏููู
โโโ characters.ts          # ูุงููุดูุฒ ุงูุดุฎุตูุงุช
โโโ quotes.ts              # ูุงููุดูุฒ ุงูุงูุชุจุงุณุงุช
โโโ emailLogs.ts           # ุณุฌูุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
โโโ sendEmail.ts           # ุฅุฑุณุงู ุงูุจุฑูุฏ ุจุทุฑููุฉ ุฅุจุฏุงุนูุฉ
โโโ cron.ts                # Cron Jobs ููุฅุฑุณุงู ุงูุชููุงุฆู
โโโ index.ts               # ุชุตุฏูุฑ ุฌููุน ุงููุงููุดูุฒ
```

## ๐ ุงูุฅุนุฏุงุฏ ูุงูุชุดุบูู

### 1. ุชุซุจูุช ุงููุชุทูุจุงุช

```bash
npm install
npm install bcryptjs
npm install --save-dev @types/bcryptjs
```

### 2. ุฅุนุฏุงุฏ ุงููุชุบูุฑุงุช ุงูุจูุฆูุฉ

ุฃูุดุฆ ููู `.env.local` ูุฃุถู:

```env
# Convex Configuration
CONVEX_DEPLOY_KEY=your_convex_deploy_key_here

# Resend Email Configuration
RESEND_API_KEY=your_resend_api_key_here
```

### 3. ุชุดุบูู ุงููุดุฑูุน

```bash
# ุชุดุบูู Convex ูุญููุงู
npx convex dev

# ุฃู ุชุดุบูู ูุฑุฉ ูุงุญุฏุฉ
npx convex dev --once
```

## ๐ ุงููุงููุดูุฒ ุงููุชุงุญุฉ

### ๐ค **ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู** (`users.ts`)

```typescript
// ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
const userId = await mutation.users.register({
  firstName: "ุฃุญูุฏ",
  lastName: "ูุญูุฏ",
  email: "ahmed@example.com",
  password: "password123",
  favoriteCharacter: characterId
});

// ุชุณุฌูู ุงูุฏุฎูู
const user = await mutation.users.login({
  email: "ahmed@example.com",
  password: "password123"
});

// ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
await mutation.users.changePassword({
  userId,
  currentPassword: "password123",
  newPassword: "newpassword123"
});

// ุชุญุฏูุซ ุงูุงุณู
await mutation.users.updateName({
  userId,
  firstName: "ุฃุญูุฏ ุงูุฌุฏูุฏ",
  lastName: "ูุญูุฏ ุงูุฌุฏูุฏ"
});

// ุงุฎุชูุงุฑ ุงูุดุฎุตูุฉ ุงูููุถูุฉ
await mutation.users.selectFavoriteCharacter({
  userId,
  characterId: "character_id"
});

// ุงุฎุชูุงุฑ ุงููุฒุงุฌ ูุงูุดุฎุตูุฉ (ุชุฑุณู ุฅูููู ููุฑุงู)
await mutation.users.selectMoodAndCharacter({
  userId,
  mood: "happy",
  characterId: "character_id"
});

// ุชูุนูู/ุฅููุงู ุงูุฅุฑุณุงู ุงููููู
await mutation.users.enableDailyQuotes({ userId });
await mutation.users.disableDailyQuotes({ userId });
```

### ๐ญ **ุฅุฏุงุฑุฉ ุงูุดุฎุตูุงุช** (`characters.ts`)

```typescript
// ุฅูุดุงุก ุดุฎุตูุฉ ุฌุฏูุฏุฉ
const characterId = await mutation.characters.create({
  name: "ุฃูุจุฑุช ุฃููุดุชุงูู",
  description: "ุนุงูู ููุฒูุงุก ูุดููุฑ"
});

// ุงูุญุตูู ุนูู ุฌููุน ุงูุดุฎุตูุงุช
const characters = await query.characters.list();

// ุงูุญุตูู ุนูู ุดุฎุตูุฉ ุจุงูุงุณู
const character = await query.characters.getByName({ name: "ุฃูุจุฑุช ุฃููุดุชุงูู" });
```

### ๐ฌ **ุฅุฏุงุฑุฉ ุงูุงูุชุจุงุณุงุช** (`quotes.ts`)

```typescript
// ุฅูุดุงุก ุงูุชุจุงุณ ุฌุฏูุฏ
const quoteId = await mutation.quotes.create({
  characterId: "character_id",
  text: "ุงูุญูุงุฉ ูุซู ุฑููุจ ุงูุฏุฑุงุฌุฉุ ููู ุชุญุงูุธ ุนูู ุชูุงุฒูู ูุฌุจ ุฃู ุชุณุชูุฑ ูู ุงูุชุญุฑู",
  mood: "inspired"
});

// ุงูุญุตูู ุนูู ุงูุชุจุงุณุงุช ุญุณุจ ุงูุดุฎุตูุฉ ูุงููุฒุงุฌ
const quotes = await query.quotes.getByCharacterAndMood({
  characterId: "character_id",
  mood: "happy"
});

// ุงูุญุตูู ุนูู ุงูุชุจุงุณ ุนุดูุงุฆู
const randomQuote = await query.quotes.getRandomByCharacterAndMood({
  characterId: "character_id",
  mood: "inspired"
});
```

### ๐ง **ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู** (`sendEmail.ts`)

```typescript
// ุฅุฑุณุงู ุงูุชุจุงุณ ูููู ูู ุงูุดุฎุตูุฉ ุงูููุถูุฉ
const result = await action.sendEmail.sendDailyQuoteToUser({
  userId: "user_id"
});

// ุฅุฑุณุงู ุงูุชุจุงุณ ุญุณุจ ุงููุฒุงุฌ ูุงูุดุฎุตูุฉ
const result = await action.sendEmail.sendMoodQuoteToUser({
  userId: "user_id",
  mood: "inspired",
  characterId: "character_id"
});
```

### โฐ **Cron Jobs** (`cron.ts`)

ุงููุดุฑูุน ูุชุถูู 3 cron jobs ูุฎุชููุฉ:

1. **ูู ููู ูู ุงูุณุงุนุฉ 9 ุตุจุงุญุงู** - `sendDailyQuotes`
2. **ูู ููููู ูู ุงูุณุงุนุฉ 10 ุตุจุงุญุงู** - `sendBiDailyQuotes`
3. **ูู ููู ูู ุงูุณุงุนุฉ 7 ุตุจุงุญุงู** - `sendMorningQuotes`

## ๐จ **ุงูุทุฑููุฉ ุงูุฅุจุฏุงุนูุฉ ูุฅุฑุณุงู ุงูุจุฑูุฏ**

### โจ **ููุฒุงุช ูุฑูุฏุฉ:**

1. **ุชุตููู HTML ูุชุฌุงูุจ** ุจุงููุบุฉ ุงูุนุฑุจูุฉ ูุน ุฏุนู RTL
2. **ุฃููุงู ุฏููุงููููุฉ** ุญุณุจ ุงููุฒุงุฌ
3. **ุฅูููุฌู ุฐููุฉ** ููู ูุฒุงุฌ
4. **ุชูููุน ุฅุจุฏุงุนู** ุญุณุจ ููุน ุงูุจุฑูุฏ
5. **Headers ูุฎุตุตุฉ** ููุจุฑูุฏ ุงูุฅููุชุฑููู
6. **ุชูููุช ุฐูู** ููุชุญูุฉ (ุตุจุงุญ ุงูุฎูุฑุ ูุณุงุก ุงูุฎูุฑ)

### ๐จ **ูุงูุจ ุงูุจุฑูุฏ ุงููููู:**
- ุฎูููุฉ ูุชุฏุฑุฌุฉ ุฌูููุฉ
- ุชุญูุฉ ุฐููุฉ ุญุณุจ ุงูููุช
- ุดุงุฑุฉ "ุงูุชุจุงุณ ุงูููู"
- ุชุตููู ูููุฒ ููุงูุชุจุงุณ
- ุชูููุน ุฅุจุฏุงุนู

### ๐ญ **ูุงูุจ ุงูุจุฑูุฏ ุญุณุจ ุงููุฒุงุฌ:**
- ุฃููุงู ูุชุฏุฑุฌุฉ ุญุณุจ ุงููุฒุงุฌ
- ุฅูููุฌู ุงููุฒุงุฌ
- ุชุตููู ูุฎุตุต
- ุฑุณุงูุฉ ุดุฎุตูุฉ

## ๐ง ุงูุชุฎุตูุต

### ุฅุถุงูุฉ ุดุฎุตูุงุช ุฌุฏูุฏุฉ

```typescript
await mutation.characters.create({
  name: "ุดุฎุตูุฉ ุฌุฏูุฏุฉ",
  description: "ูุตู ุงูุดุฎุตูุฉ"
});
```

### ุฅุถุงูุฉ ุงูุชุจุงุณุงุช ุฌุฏูุฏุฉ

```typescript
await mutation.quotes.create({
  characterId: "character_id",
  text: "ูุต ุงูุงูุชุจุงุณ",
  mood: "happy"
});
```

### ุงููุฒุงุฌุงุช ุงููุฏุนููุฉ

- `happy` - ุณุนูุฏ ๐
- `sad` - ุญุฒูู ๐ข
- `excited` - ูุชุญูุณ ๐คฉ
- `calm` - ูุงุฏุฆ ๐
- `motivated` - ูุชุญูุฒ ๐ช
- `relaxed` - ูุณุชุฑุฎู ๐ด
- `inspired` - ูููู โจ
- `grateful` - ููุชู ๐
- `optimistic` - ูุชูุงุฆู ๐
- `peaceful` - ูุณุงูู ๐๏ธ
- `energetic` - ูุดูุท โก
- `thoughtful` - ูุชููุฑ ๐ค
- `joyful` - ูุจุชูุฌ ๐
- `serene` - ูุงุฏุฆ ๐ฟ
- `determined` - ูุตูู ๐ฅ
- `anxious` - ููู ๐ฐ
- `confident` - ูุงุซู ๐
- `curious` - ูุถููู ๐ค
- `playful` - ูุฑุญ ๐
- `reflective` - ุชุฃููู ๐ง

## ๐ก๏ธ ุงูุฃูุงู

- ุชุดููุฑ ูููุงุช ุงููุฑูุฑ ุจุงุณุชุฎุฏุงู bcrypt
- ุงูุชุญูู ูู ูุฌูุฏ ุงููุณุชุฎุฏู ูุจู ุฅุฑุณุงู ุงูุจุฑูุฏ
- ุงูุชุญูู ูู ูุฌูุฏ ุงููุฒุงุฌ ูุงูุดุฎุตูุฉ ุงูููุถูุฉ
- ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจุดูู ููุงุณุจ
- ุชุณุฌูู ุฌููุน ุนูููุงุช ุงูุฅุฑุณุงู

## ๐ ุงููุฑุงูุจุฉ

- ุฌููุน ุนูููุงุช ุงูุฅุฑุณุงู ุชูุณุฌู ูู `emailLogs`
- ูููู ุชุชุจุน ุชุงุฑูุฎ ุงูุฅุฑุณุงู ููู ูุณุชุฎุฏู
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ
- ุฅุญุตุงุฆูุงุช ุงููุฌุงุญ ูุงููุดู ูู cron jobs

## ๐ ุงูุชุทููุฑ ุงููุณุชูุจูู

- [ ] ุฅุถุงูุฉ ูุธุงู ูุตุงุฏูุฉ ูุชูุฏู
- [ ] ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช ุชุฎุตูุต ูููุณุชุฎุฏููู
- [ ] ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ููุตูุฉ
- [ ] ุฏุนู ุฅุฑุณุงู ุงูุจุฑูุฏ ุจุฌุฏููุฉ ูุฎุตุตุฉ
- [ ] ุฅุถุงูุฉ ูุงุฌูุฉ ุฅุฏุงุฑูุฉ
- [ ] ุฏุนู ุฅุฑุณุงู ุงูุจุฑูุฏ ุจุงูุตูุช
- [ ] ุฅุถุงูุฉ ุงูุชุจุงุณุงุช ุชูุงุนููุฉ

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุชุ ููููู:
- ูุชุญ issue ูู GitHub
- ูุฑุงุฌุนุฉ ูุซุงุฆู Convex: https://docs.convex.dev
- ูุฑุงุฌุนุฉ ูุซุงุฆู Resend: https://resend.com/docs

---

**ููุงุญุธุฉ**: ุชุฃูุฏ ูู ุฅุนุฏุงุฏ `RESEND_API_KEY` ุจุดูู ุตุญูุญ ูุชูุนูู ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู.

## ๐ฏ **ููููุฉ ุงูุงุณุชุฎุฏุงู ูู Frontend:**

```typescript
import { useMutation, useQuery } from "convex/react";
import { api } from "../convex/_generated/api";

// ุชุณุฌูู ุงูุฏุฎูู
const login = useMutation(api.users.login);
const user = await login({ email: "user@example.com", password: "password" });

// ุงุฎุชูุงุฑ ุงูุดุฎุตูุฉ ุงูููุถูุฉ
const selectFavorite = useMutation(api.users.selectFavoriteCharacter);
await selectFavorite({ userId: user.id, characterId: "character_id" });

// ุงุฎุชูุงุฑ ุงููุฒุงุฌ ูุงูุดุฎุตูุฉ (ุชุฑุณู ุฅูููู ููุฑุงู)
const selectMood = useMutation(api.users.selectMoodAndCharacter);
await selectMood({ 
  userId: user.id, 
  mood: "inspired", 
  characterId: "character_id" 
});

// ุงูุญุตูู ุนูู ุงูุดุฎุตูุงุช
const characters = useQuery(api.characters.list);

// ุงูุญุตูู ุนูู ุงูุงูุชุจุงุณุงุช
const quotes = useQuery(api.quotes.getByCharacter, { characterId: "character_id" });
``` 